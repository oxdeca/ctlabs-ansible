---

# ------------------------------------------------------------------------------
# File        : ctlabs_atlantis/tasks/package.yml
# Description : packages
# ------------------------------------------------------------------------------

- name: ctlabs_atlantis.tasks.package.bindir
  file:
    path  : "{{ ctlabs_atlantis.defaults.pkgs.atlantis.bindir }}"
    state : directory

- name: ctlabs_atlantis.tasks.package.download
  get_url:
    url  : "{{ ctlabs_atlantis.defaults.pkgs.atlantis.url    }}"
    dest : "{{ ctlabs_atlantis.defaults.pkgs.atlantis.tmpzip }}"
  delegate_to: localhost

- name: ctlabs_atlantis.tasks.package.unzip
  unarchive:
    src  : "{{ ctlabs_atlantis.defaults.pkgs.atlantis.tmpzip }}"
    dest : "{{ ctlabs_atlantis.defaults.pkgs.atlantis.bindir }}"

- name: ctlabs_atlantis.tasks.package.group
  group:
    name   : "{{ ctlabs_atlantis.defaults.service.group }}"
    system : true

- name: ctlabs_atlantis.tasks.package.user
  user:
    name   : "{{ ctlabs_atlantis.defaults.service.user  }}"
    group  : "{{ ctlabs_atlantis.defaults.service.group }}"
    system : true

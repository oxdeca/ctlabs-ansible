---

# ------------------------------------------------------------------------------
# File        : ctlabs-ansible/roles/ctlabs_slapd/defaults/main.yml
# Description : ctlabs_slapd defaults file
# ------------------------------------------------------------------------------

ctlabs_slapd:
  defaults:
    pkgs:
      - name : slapd
      - name : ldap-utils
    service:
      name : slapd.service
    user : openldap
    group: openldap
    config:
      template : slapd.conf.j2
      file     : /etc/ldap/slapd.conf
      dir      : /etc/ldap/slapd.d
      ca_ctlabs:
        certdir: /etc/ca-ctlabs
      default:
        template: slapd.default.j2
        file    : /etc/default/slapd
      dbs:
        ldap:
          suffix: dc=ctlabs,dc=local
          uri   : ldaps://dc1.ctlabs.local ldaps://dc2.ctlabs.local
          bind  : 
            method: simple
            user  : cn=slapd,ou=services,dc=ctlabs,dc=local
            pass  : secret123!

      tls:
        dir : /etc/ldap/certs
        crt : "{{ inventory_hostname }}.ctlabs.local.crt"
        key : "{{ inventory_hostname }}.ctlabs.local.key"
        prv : "{{ inventory_hostname }}.ctlabs.local.prv"
        ca  : ca-ctlabs.crt

  os:
    - debian11
    - debian12


---

# ------------------------------------------------------------------------------
# File        : ctlabs-ansible/roles/ctlabs_semaphore/tasks/package.yml
# Description : packages
# ------------------------------------------------------------------------------

- name: ctlabs_semaphore.tasks.package.install
  yum:
    name              : "{{ item.url if item.url is defined else item.name }}"
    disable_gpg_check : true
    state             : present
  loop    : "{{ ctlabs_semaphore.defaults.pkgs }}"
  register: result
  until   : result is success
  delay   : 1
  retries : 5

- name: ctlabs_semaphore.tasks.package.group
  group:
    name   : "{{ ctlabs_semaphore.defaults.service.group }}"
    system : true

- name: ctlabs_semaphore.tasks.package.user
  user:
    name   : "{{ ctlabs_semaphore.defaults.service.user  }}"
    group  : "{{ ctlabs_semaphore.defaults.service.group }}"
    system : true

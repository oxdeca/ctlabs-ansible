---

# ------------------------------------------------------------------------------
# File        : ctlabs-ansible/roles/ctlabs_ca/tasks/precheck.yml
# Description : prechecks
# ------------------------------------------------------------------------------

- name: ctlabs_ca.tasks.precheck.supported_os
  assert:
    that     : os is in ctlabs_ca.os
    fail_msg : "OS[{{os}}] is not supported!"

- name: ctlabs_ca.tasks.precheck.ca.root_cert.exists
  stat: 
    path: "{{ ctlabs_ca.defaults.config.dir }}/{{ ctlabs_ca.defaults.config.ca.name }}.crt"
  register: ctlabs_ca_root_cert

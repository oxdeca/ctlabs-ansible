---

# ------------------------------------------------------------------------------
# File        : ctlabs-ansible/roles/ctlabs_guacamole/tasks/package.yml
# Description : main ctlabs_guacamole tasks file.
# ------------------------------------------------------------------------------

- name: ctlabs_guacamole.tasks.package.installed
  package:
    name    : "{{ item.name }}"
    state : present
  loop    : "{{ ctlabs_guacamole.defaults.pkgs[ctg_os_family] }}"
  register: result
  until   : result is success
  delay   : 1
  retries : 5

- name: ctlabs_guacamole.tasks.package.webapp.installed
  get_url:
    url  : "{{ ctlabs_guacamole.defaults.webapp.url  }}"
    dest : "{{ ctlabs_guacamole.defaults.webapp.file }}"

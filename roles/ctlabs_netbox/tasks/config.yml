---

# ------------------------------------------------------------------------------
# File        : ctlabs-ansible/roles/ctlabs_netbox/tasks/config.yml
# Description : configurations
# ------------------------------------------------------------------------------

- name: ctlabs_netbox.tasks.config.file
  template:
    src  : "{{ ctlabs_netbox.defaults.config.main.template }}"
    dest : "{{ ctlabs_netbox.defaults.config.main.file     }}"
  notify: ctlabs_netbox.handlers.service.restart

- name: ctlabs_netbox.tasks.config.netbox
  template: 
    src  : "{{ ctlabs_netbox.defaults.scripts.netbox.template }}"
    dest : "{{ ctlabs_netbox.defaults.scripts.netbox.file     }}"
    mode : '0750'

- name: ctlabs_netbox.tasks.config.housekeeping
  file:
    src  : "{{ ctlabs_netbox.defaults.scripts.housekeeping.src }}"
    dest : "{{ ctlabs_netbox.defaults.scripts.housekeeping.dst }}"
    state: link

- name: ctlabs_netbox.tasks.config.httpd
  copy:
    src  : "{{ ctlabs_netbox.defaults.config.httpd.template   }}"
    dest : "{{ ctlabs_netbox.defaults.config.httpd[os_family] }}"
  #notify: ctlabs_httpd.handlers.httpd.service

- name: ctlabs_netbox.tasks.config.update
  shell:
    cmd: "{{ ctlabs_netbox.defaults.scripts.netbox.cmd.update }}"

- name: ctlabs_netbox.tasks.config.admin.create
  shell:
    cmd: "{{ ctlabs_netbox.defaults.scripts.netbox.cmd.admin }}"

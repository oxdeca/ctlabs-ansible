---

# ------------------------------------------------------------------------------
# File        : ctlabs_filebeat/tasks/config.yml
# Description : create default configuration user/directories
# ------------------------------------------------------------------------------

- name: ctlabs_filebeat.tasks.config.file
  template:
    src   : "{{ ctlabs_filebeat.defaults.config.main.templates }}"
    dest  : "{{ ctlabs_filebeat.defaults.config.dirs.main }}/{{ ctlabs_filebeat.defaults.config.main.file }}"
  notify: ctlabs_filebeat.handlers.service.restart

- name: ctlabs_filebeat.tasks.config.module.activate
  command: filebeat modules enable system 
  notify: ctlabs_filebeat.handlers.service.restart

- name: ctlabs_filebeat.tasks.config.module.setup
  command: filebeat setup
  notify: ctlabs_filebeat.handlers.service.restart

---

# ------------------------------------------------------------------------------
# File        : ctlabs-ansible/roles/ctlabs_rke2/defaults/main.yml
# Description : main defaults
# ------------------------------------------------------------------------------

versions:
  rke2 : 1.33.3
  helm : 3.16.1

ctlabs_rke2:
  defaults:
    pkgs:
      debian:
        - name: python3-yaml
        - name: python3-kubernetes
      rke2:
        uri  : "https://github.com/rancher/rke2/releases/download/v{{ versions.rke2 }}+rke2r1/rke2.linux-amd64"
        path : /usr/bin/rke2
        mode : '0750'
      helm:
        version: 
        url    : "https://get.helm.sh/helm-v{{ versions.helm }}-linux-amd64.tar.gz"
        tmptar : /tmp/helm.tar.gz
        tmpdir : /tmp
        tardir : /tmp/linux-amd64
        path   : /usr/bin/helm
        mode   : '0750'
    helm:
      - ns   : argo
        name : argo
        chart: argo/argo-cd
        repo : https://argoproj.github.io/argo-helm
    config:
      role: server
      server:
        url: "https://{{ ansible_nodename }}:6443"
        token: /var/lib/rancher/rke2/server/token
      profile:
        template: rke2.profile.j2
        file    : /etc/profile.d/rke2.sh
    service:
      server:
        name     : rke2-server.service
        template : rke2-server.service.j2
      agent:
        name     : rke2-agent.service
        template : rke2-agent.service.j2
    sysconfig:
      dir  : /etc/sysconfig
      agent:
        name     : /etc/sysconfig/rke2
        template : rke2-agent.sysconfig.j2
    bin:
      path: /usr/bin/rke2
      mode: '0750'
  os:
    - centos8
    - centos9
    - debian11
    - debian12
  virtype:
    - kvm
